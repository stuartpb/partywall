# partywall

A prollyfill for the HTML Parts and Walls spec.

This prollyfill is split into two separate files: `partywall-dom.js` and
`partywall-style.js`. These files are independent of one another: you may
choose to only use `partywall-dom.js` if you are only using parts and walls
for DOM access purposes, and/or `partywall-style.js` if you are only using
parts and walls for CSS style encapsulation.

## Using partywall-dom.js

`partywall-dom.js` implements the `getPart` function on elements, as well as
setters and getters for the `part` and `wall` properties. To use it, include
the script and use the DOM properties as specified by the spec.

## Using partywall-style.js

This script is significantly more complicated than partywall-dom.js, as it adds
live information to all elements on the page and updates a global stylesheet
to apply styles to any of these elements that would match the given selector.

To start using this script, call the `partywallStyler()` function it adds to
the global environment. This will populate the needed information for all
elements on the page, set up mutation observers to keep that information
accurate, and add a stylesheet to the document to contain all styles whose
selectors are dynamically generated by this styler.

To add a style to be applied by the styler, use `addStyle(list, style)`. The
`list` argument is an array of selectors, where the selectors are arrays of
wall-separated selector strings. (Any selectors that involve non-walled
descendant selectors between them may be specified as further arrays, whose
contents will be concatenated with spaces.) The `style` argument is the
string of CSS style properties, like what you would assign to a `style`
property on an element.

### Known limitations

- Part selectors specified as an ID do not increase specificity the way the
  spec states they should.
- While the spec states that walled descendant selectors should be capable of
  crossing Shadow DOM boundaries, the selectors specified by partywall-style.js
  are document-bound.
- Increases in wall depth will increase selector application time, due to the
  way styles are generated to match through all potential wall roots.
